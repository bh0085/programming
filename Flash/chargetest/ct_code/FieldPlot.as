package ct_code{		import Math	import flash.display.Shape		public class FieldPlot extends Shape{				public var chargesystem:ChargeSystem				public function FieldPlot(system:ChargeSystem){						chargesystem = system			var numcharge:Number = chargesystem.charges.length			var reversepath:Number = 0						for ( var i:Number = 0 ; i < numcharge ; i++) {				var numlines:Number = Math.floor(chargesystem.perq * (chargesystem.charges[i].charge))				if (chargesystem.charges[i].charge  <  0) {reversepath = 1} else {reversepath = 0}				for( var j:Number = 0; j < numlines ; j++) {										var angle:Number = 360 * j / numlines					var xstep:Number = Math.cos(angle * 2 * Math.PI / 360) * chargesystem.steplength * ( -2 * reversepath + 1)					var ystep:Number = Math.sin(angle * 2 * Math.PI / 360) * chargesystem.steplength * ( -2 * reversepath + 1)										graphics.lineStyle(1)										var currx:Number = chargesystem.charges[i].thisx + xstep					var curry:Number = chargesystem.charges[i].thisy + ystep					graphics.moveTo(currx,curry)					for ( var k: Number = 0; k< chargesystem.numsteps ; k ++) {						var thisE:Array = chargesystem.findE(currx,curry)						var magE:Number = Math.sqrt(Math.pow(thisE[0],2) + Math.pow(thisE[1],2))						currx += (thisE[0] / magE) * chargesystem.steplength * ( -2 * reversepath + 1) 						curry += (thisE[1] / magE) * chargesystem.steplength * ( -2 * reversepath + 1)									graphics.lineTo(currx,curry)					}				}			}					}	}}