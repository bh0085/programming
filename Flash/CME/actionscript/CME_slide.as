package actionscript{	import actionscript.CME_main	import flash.display.Sprite	import flash.text.TextFormat	import flash.text.TextField	public class CME_slide extends Sprite{		public var textBox:TextField		var bg:Sprite		var h		var w		public static var slideDefaultHeight = 400		public static var slideDefaultWidth = 500		public function CME_slide(text:String){			h = slideDefaultHeight			w = slideDefaultWidth			bg = new Sprite()			bg.graphics.lineStyle(0,0xAAAAAA)			bg.graphics.beginFill(0xEEEEEE)			bg.graphics.drawRect(0,0,w,h)			textBox = new TextField()			var textFormat = new TextFormat("Optima",null,0x000000)			textBox.defaultTextFormat = textFormat			textBox.text = text			textBox.height = h			textBox.width = w			textBox.multiline = true			textBox.wordWrap = true			addChild(bg)			addChild(textBox)		}		public function getSelectedText():String{			var sStart = textBox.selectionBeginIndex			var sEnd = textBox.selectionEndIndex			var string = textBox.text			var excerpt = string.slice(sStart,sEnd)			return excerpt		}				public function getSelectionStart():Number{			return textBox.selectionBeginIndex		}				public function getSelectedSentence():String{			var sStart = textBox.selectionBeginIndex			var string = textBox.text			var excerpt = string.substr(0,sStart)			var found = 0			var idx = 0			var search = true			while(search){				var first = excerpt.indexOf(".",idx)				if(first != -1){					idx = first +1					found++				} else {					search = false				}			}			var sentNumber = found			return sentNumber					}		public function numSentences(t:String):Number{			var found = 0			var idx = 0			var search = true			while(search){				var first = t.indexOf(".",idx)				if(first != -1){					idx = first +1					found++				} else {					search = false				}			}			var sentNumber = found						return sentNumber		}																								public function printSentence(idx:Number, count:Number):String{			var target = idx			var numSent = 0			var search = true			var beginning = 0			while(numSent < target && search){				var first = textBox.text.indexOf(".",beginning + 1)				if(first != -1){					beginning = first					numSent++				} else {					search = false				}			}						if(search){				var end = textBox.text.indexOf('.',beginning + 1)				for(var i = 0; i<count ; i++){					if(end != -1){						end = textBox.text.indexOf('.',end +1)					}				}				if(end == -1){ end  = textBox.text.length}				var t = textBox.text.slice(beginning+1,end)				return t			} else {				return null			}		}											public function sentenceStart(idx:Number):Number{			var target = idx			var numSent = 0			var search = true			var beginning = 0			while(numSent < target && search){				var first = textBox.text.indexOf(".",beginning + 1)				if(first != -1){					beginning = first					numSent++				} else {					search = false				}						}			return beginning		}	}}