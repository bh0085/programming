package tanks.tank{		import flash.utils.getTimer	import flash.display.Sprite	import flash.display.Shape	import flash.events.Event	import physics.objects.PhysObject	import physics.PhysUniverse		public class Exhaust extends Sprite{				public static var puffs:Array		public static var times:Array		public static var thisUniverse:PhysUniverse						public  static function addPuff(xy:Array,... args){			var color: uint			if(args.length == 0) { color = 0x000000 } else {color = args[0]}			if(puffs == null) {puffs = new Array() }			if(times == null) {times = new Array() }			if( puffs.length == 0){				thisUniverse.addEventListener(Event.ENTER_FRAME,Exhaust.exhNextFrame)			}									for (var i = 0; i<1 ; i++){			var randx = (Math.random() - .5) * 30			var randy = (Math.random() - .5) * 30			var randRad=Math.random() * 3			puffs.push(new Shape())			times.push(getTimer())			puffs[puffs.length - 1].graphics.beginFill(color)			//puffs[puffs.length - 1].graphics.lineStyle(0)			puffs[puffs.length - 1].alpha = .25			puffs[puffs.length - 1].graphics.drawCircle(0,0,randRad + 2)			puffs[puffs.length - 1].x = xy[0] + randx			puffs[puffs.length - 1].y = xy[1] + randy			thisUniverse.addChild(puffs[puffs.length - 1])			}		}				public static function exhNextFrame(event:Event):void{			var l = times.length			var currTime = getTimer()			for (var i = 0; i < l ; i++){				puffs[i].alpha *=.85				puffs[i].x -= 10				puffs[i].y -= (currTime - times[i]) / 50				puffs[i].height*= 1.07				puffs[i].width *=  1.07			}						var search = false			if ((currTime - times[0]) > 400) {search = true}			while(search) {				thisUniverse.removeChild(puffs[0])				puffs[0] = null				times.shift()				puffs.shift()				if (( (times.length > 0) && (currTime - times[0]) > 400)) {search = true} else {search = false}			}							if(times.length ==0) {thisUniverse.removeEventListener(Event.ENTER_FRAME,Exhaust.exhNextFrame)}		}					}}